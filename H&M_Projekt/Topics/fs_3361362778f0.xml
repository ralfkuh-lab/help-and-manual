<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="../helpproject.xsl" ?>
<topic template="Default" modified="2026-01-30T13:12:52.065Z" lasteditedby="rakul" version="2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="../helpproject.xsd">
  <title>Beispiel für ein Prerequisite-Skript zum Prüfen von Datenschutz-Zwecken</title>
  <body>
    <header>
      <para styleclass="Heading1">Beispiel für ein Prerequisite-Skript zum Prüfen von Datenschutz-Zwecken</para>
    </header>
    <para styleclass="Normal">Mit dem folgenden Beispiel-Code für ein Prerequisite-Skript wird geprüft, ob die Stammdaten für die Datenschutz-Zwecke „FoM“ (mit laufender Nummer 0) und „Inso9“ (mit laufender Nummer 23) im Zielsystem bereits vorhanden sind.</para>
    <para styleclass="Normal">Der Transport wird nur durchgeführt, wenn beide Zwecke mit genau diesen Wertkombinationen bereits vorhanden sind (es werden Info-Protokolleinträge geschrieben, dass die Zwecke vorhanden sind). Falls einer fehlt oder die Werte in anderen Kombinationen existieren, werden Fehler-Protokolleinträge geschrieben und der Transport wird verhindert.</para>
    <para styleclass="ÜberschriftEinfach_Gross">Beispiel-Code für Prerequisite-Skript</para>
    <para styleclass="Quellcode_OhneFarbe" style="tabstops:19px left,38px left,57px left,76px left,95px left,113px left,132px left,151px left,170px left,189px left ;">/* provide the info about the purposes required for the transported artefacts<br/>Note: package contents can not be read in Custom Code in a generic way.<br/>Hence, the individual data must be stated in the script<br/>*/<br/>const requiredDataProtectionPurposes = [{serialNo: 0, code: &apos;FoM&apos;}, {serialNo: 21, code: &apos;Sicher&apos;}];<br/>const purposesInTargetSystem = linq.execute(&apos;from purpose in @DpPurpose select new { serialNo = purpose.serialNo, code = purpose.code }&apos;).toList();<br/>let requiredPurposesInTargetSystem;<br/><br/>requiredDataProtectionPurposes.forEach(function(purposeInfo){<br/> &#160; const requiredPurposesInTargetSystem = purposesInTargetSystem.filter(purpose =&gt; purpose.serialNo === purposeInfo.serialNo<br/> &#160; &#160; &#160;|| purpose.code.toLowerCase() === purposeInfo.code.toLowerCase());<br/> &#160; if (requiredPurposesInTargetSystem.length === 1) {<br/> &#160; &#160; &#160;if (requiredPurposesInTargetSystem.elementAt(0).code.toLowerCase() === purposeInfo.code.toLowerCase() &amp;&amp; requiredPurposesInTargetSystem.elementAt(0).serialNo === purposeInfo.serialNo) {<br/> &#160; &#160; &#160; &#160; trms.reportInfo(`The data protection purpose &quot;${purposeInfo.code}&quot; with serial number ${purposeInfo.serialNo} already exists in the target system.`);<br/> &#160; &#160; &#160;} else {<br/> &#160; &#160; &#160; &#160; trms.reportError(&apos;The target system already contains a data protection purpose with the serial number &quot;&apos; <br/> &#160; &#160; &#160; &#160; + purposeInfo.serialNo + &apos;&quot; or the code &quot;&apos; + purposeInfo.code + &#160;<br/> &#160; &#160; &#160; &#160; &apos;&quot;. However, the combination is not unique!&apos;);<br/> &#160; &#160; &#160;}<br/> &#160; } else if(requiredPurposesInTargetSystem.length === 0) {<br/> &#160; &#160; &#160; &#160; trms.reportError(&apos;The required data protection purpose entries do not exist in the target system.&apos;);<br/> &#160; } else if(requiredPurposesInTargetSystem.length &gt; 1) {<br/> &#160; &#160; &#160; &#160; trms.reportError(&apos;The data protection purpose &quot;&apos; + purposeInfo.code + &apos;&quot; or the serial number &apos; + purposeInfo.serialNo + &apos; were found. However, the combination is not unique!&apos;);<br/> &#160; }<br/>});</para>
  </body>
</topic>
