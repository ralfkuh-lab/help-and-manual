<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Bedingungsprüfung und Vor- und Nachbereitung per Ereignisskript beim Transport</title>
<meta charset="UTF-8" />
<meta name="generator" content="Help+Manual" />
<link rel="stylesheet" type="text/css" href="./css/trms_styles.css" />
<script>
// postMessage listener for iframe-based loading (file:// CORS workaround)
window.addEventListener('message', function(e) {
    if (e.data === 'getContent' && window.parent) {
        window.parent.postMessage({ doc: document.documentElement.outerHTML }, '*');
    }
});
</script>
<link rel="prev" href="fs_52ee3b02ee67.html" />
<link rel="next" href="fs_a684a04e034a.html" />
</head>
<body data-topic-id="fs_11ed2b9082ce">
<h2>Bedingungsprüfung und Vor- und Nachbereitung per Ereignisskript beim Transport</h2>
<p class="p_UeberschriftEinfach_Gross" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_UeberschriftEinfach_Gross">Hintergrund</span></p>
<p class="p_Normal" style="page-break-inside: avoid;">In jedem Paket, Change und Change Set können drei verschiedene sogenannte „Transportkontrollskripte“ hinterlegt sein: „Prerequisite“, „Initialisierung“ und „Finalisierung“</p>
<p class="p_Normal" style="page-break-inside: avoid;">Alle drei müssen in Custom Code programmiert sein. Deren Quellcode wird an das IKAROS-Zielsystem übergeben und dort einmalig ausgeführt. Die Möglichkeiten in Custom Code sind bei allen dreien identisch, sie unterscheiden sich lediglich beim Zeitpunkt, an dem sie während des Transportprozesses ausgeführt werden (und dadurch, ob sie das Installieren von Artefakten abbrechen können):</p>
<div style="text-align: left; text-indent: 0; page-break-inside: avoid; padding: 0 0 0 0; margin: 0.2500rem 0 0.2500rem 0.5000rem;"><table style="border:none; border-spacing:0; border-collapse:collapse;">
<thead>
<tr>
<th style="vertical-align:top; width:2.7500rem; background-color:#4F81BD; padding:0.3750rem; border:solid thin #a6a6a6;" scope="col"><p class="p_Normal" style="text-align: center; page-break-inside: avoid; page-break-after: avoid;"><strong style="font-size: 0.80rem; font-weight: bold; color: #ffffff;">Reihen-folge</strong></p>
</th>
<th style="vertical-align:top; width:5.3750rem; background-color:#4F81BD; padding:0.3750rem; border:solid thin #a6a6a6;" scope="col"><p class="p_Normal" style="text-align: center; page-break-inside: avoid; page-break-after: avoid;"><strong style="font-size: 0.80rem; font-weight: bold; color: #ffffff;">Name</strong></p>
</th>
<th style="vertical-align:top; width:11.5625rem; background-color:#4F81BD; padding:0.3750rem; border:solid thin #a6a6a6;" scope="col"><p class="p_Normal" style="text-align: center; page-break-inside: avoid; page-break-after: avoid;"><strong style="font-size: 0.80rem; font-weight: bold; color: #ffffff;">Ausführungszeitpunkt</strong></p>
</th>
<th style="vertical-align:top; width:13.8750rem; background-color:#4F81BD; padding:0.3750rem; border:solid thin #a6a6a6;" scope="col"><p class="p_Normal" style="text-align: center; page-break-inside: avoid; page-break-after: avoid;"><strong style="font-size: 0.80rem; font-weight: bold; color: #ffffff;">Besonderheit</strong></p>
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="vertical-align:top; width:2.7500rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">1</span></p>
</td>
<td style="vertical-align:top; width:5.3750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Prerequisite-Skript</span></p>
</td>
<td style="vertical-align:top; width:11.5625rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Wird vor den anderen Skripten ausgeführt, nachdem das Artefakt-Paket im Zielsystem angekommen ist und bevor der Installationsprozess beginnt.</span></p>
</td>
<td style="vertical-align:top; width:13.8750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Kann den Transport abbrechen und die Artefakt-Installation verhindern (s. Kapitel mit ID „fs_11ed2b9082ce“ in der TRMS-Hilfe).</span></p>
<p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">In diesem Fall werden das Initialisierungs- und das Finalisierungs-Skript nicht ausgeführt.</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:2.7500rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">2</span></p>
</td>
<td style="vertical-align:top; width:5.3750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Initialisierungs-Skript</span></p>
</td>
<td style="vertical-align:top; width:11.5625rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Wird ausgeführt, nachdem &nbsp;das Prerequisite-Skript ausgeführt wurde und bevor die Installation der Artefakte im IKAROS-Zielsystem beginnt.</span></p>
</td>
<td style="vertical-align:top; width:13.8750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Erlaubt es, den Schritt der Artefakt-Installation zu verhindern (durch Überspringen) und im Anschluss direkt das Finalisierungs-Skript auszuführen.</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:2.7500rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">3</span></p>
</td>
<td style="vertical-align:top; width:5.3750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">-</span></p>
</td>
<td style="vertical-align:top; width:11.5625rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">[Installation der Artefakte im IKAROS-Zielsystem]</span></p>
</td>
<td style="vertical-align:top; width:13.8750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">-</span></p>
</td>
</tr>
<tr>
<td style="vertical-align:top; width:2.7500rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">4</span></p>
</td>
<td style="vertical-align:top; width:5.3750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Finalisierungs-Skript</span></p>
</td>
<td style="vertical-align:top; width:11.5625rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Wird als letzter Schritt des Transportprozesses ausgeführt.</span></p>
<p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Wird immer ausgeführt – außer der gesamte Transport wurde im Prerequisite-Skript abgebrochen.</span></p>
</td>
<td style="vertical-align:top; width:13.8750rem; padding:0.3750rem; border:solid thin #a6a6a6;"><p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Kann mittels „trms.transportSuccessful“ prüfen, ob alle Artefakte erfolgreich im Zielsystem installiert wurden (liefert false, falls bei mindestens einem Artefakt ein Fehler aufgetreten ist).</span></p>
<p class="p_Normal" style="page-break-inside: avoid;"><span style="font-size: 0.80rem;">Es ist im Skript nicht möglich, die Installation der Artefakte rückgängig zu machen.</span></p>
</td>
</tr>
</tbody>
</table>
</div>
<p class="p_UeberschriftEinfach" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_UeberschriftEinfach">Technische Hinweise</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Aufzaehlung1">Es ist nicht möglich, mit den Skripten Einfluss auf die eigentliche Installation einzelner Artefakte zu nehmen. Fehler oder Warnungen, die bei der Artefakt-Installation im IKAROS-System auftreten, können von den Skripten auch nicht ausgelesen werden.</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Aufzaehlung1">Pro „trms4“-Paketdatei darf es derzeit jeweils genau ein Prerequisite-, ein Initialisierungs- und ein Finalisierungs-Skript geben. D. h. wenn Sie mehrere Changes, die jeweils eigene Transportkontrollskripte beinhalten, in einem Change Set bündeln möchten, könnte es zu Konflikten hinsichtlich der Skripte kommen. Stellen Sie in diesem Fall sicher, dass nur der übergeordnete Change Set solche Skripte umfasst.</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Aufzaehlung1">In den trms4-Paketen sind die Skripte als einfache Textdateien mit den Namen „Prerequisite.cc4“, „Initialization.cc4“ und „Finalization.cc4“ auf oberster Ordnerebene enthalten, falls Skript-Code eingegeben wurde (im Artefaktpaket-Assistenten per „Bearbeiten“-Schaltfläche).</span></p>
<p class="p_UeberschriftEinfach_Gross" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_UeberschriftEinfach_Gross">Ausführungskontext</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Strong">Rückgabe</span><span class="f_Aufzaehlung1">: Eine Rückgabe benötigen die Skripte nicht und sie würde ignoriert.</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Strong">Ausführungszeitpunkt</span><span class="f_Aufzaehlung1">: Der Code des </span><span class="f_Strong">Prerequisite</span><span class="f_Aufzaehlung1">-Skripts wird nach dem Start des Transportprozesses im Zielsystem ausgeführt, vor der Ausführung eines ggf. vorhandenen </span><span class="f_Strong">Initialisierungs</span><span class="f_Aufzaehlung1">-Skripts und bevor IKAROS mit der eigentlichen Installation der Artefakte beginnt. Der Code des </span><span class="f_Strong">Finalisierungs</span><span class="f_Aufzaehlung1">-Skripts wird immer zum Abschluss des Transports ausgeführt (sofern nicht der gesamte Transportprozess im Prerequisite-Skript bzw. durch einen Fehler abgebrochen wurde).</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Strong">Ausführungsmodus</span><span class="f_Aufzaehlung1">: Der Skriptcode wird im IKAROS-Zielsystem immer mit RuntimeMode „RuntimeMode.batch“ ausgeführt. Benutzerinteraktion ist somit nicht möglich, Dialoge und Meldungen aus dem Code werden unterdrückt.</span></p>
<p class="p_UeberschriftEinfach" style="page-break-inside: avoid; page-break-after: avoid;"><span class="f_UeberschriftEinfach">Transportabbruch, Transportverhinderung und Protokolleinträge</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Strong">Transportabbruch</span><span class="f_Aufzaehlung1">: Wenn in einem Skript ein Fehler auftritt (unerwartet oder z. B. per „throw new Error()“ provoziert), wird der gesamte Transportprozess unmittelbar abgebrochen und ein technischer Fehler an das TRMS gemeldet. Auch das Finalisierungs-Skript läuft in diesem Fall </span><span class="f_Strong">nicht</span><span class="f_Aufzaehlung1">.</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Strong">Installation der Artefakte verhindern</span><span class="f_Aufzaehlung1">: Die Installation der Artefakte kann mittels „</span><span class="f_Strong">trms.reportError()</span><span class="f_Aufzaehlung1">“ verhindert werden, ohne den Transportprozess im Ganzen durch einen Fehler abbrechen zu müssen. </span></p>
<p class="p_Einzug1" style="page-break-inside: avoid;"><span class="f_Einzug1">Wenn in einem Skript mindestens einmal „trms.reportError()“ ausgeführt wird, läuft das jeweilige Skript selbst bis zum Ende durch (sodass noch weitere Info- und Fehlereinträge aus Prüfungen protokolliert werden können).</span></p>
<p class="p_Aufzaehlung2" style="text-indent: 0; page-break-inside: avoid; padding-left: 2.8750rem; margin-left: 1.5000rem;"><span class="f_Aufzaehlung2" style="font-family: 'Arial';display:inline-block;width:1.4375rem;margin-left:-1.4375rem">-</span><span class="f_Aufzaehlung2">„trms.reportError()“ im </span><span class="f_Strong">Prerequisite-Skript</span><span class="f_Aufzaehlung2"> signalisiert, dass der Transportprozess nach Skriptausführung beendet und somit kein Artefakt in das Zielsystem transportiert und auch die anderen Transportprotokollskripte nicht mehr ausgeführt werden sollen.</span></p>
<p class="p_Aufzaehlung2" style="text-indent: 0; page-break-inside: avoid; padding-left: 2.8750rem; margin-left: 1.5000rem;"><span class="f_Aufzaehlung2" style="font-family: 'Arial';display:inline-block;width:1.4375rem;margin-left:-1.4375rem">-</span><span class="f_Aufzaehlung2">„trms.reportError()“ im </span><span class="f_Strong">Initialisierungs-Skript</span><span class="f_Aufzaehlung2"> bewirkt, dass die Installation der Artefakte übersprungen (also nicht durchgeführt) und im Anschluss noch das Finalisierungs-Skript durchlaufen wird.</span></p>
<p class="p_Aufzaehlung2" style="text-indent: 0; page-break-inside: avoid; padding-left: 2.8750rem; margin-left: 1.5000rem;"><span class="f_Aufzaehlung2" style="font-family: 'Arial';display:inline-block;width:1.4375rem;margin-left:-1.4375rem">-</span><span class="f_Aufzaehlung2">„trms.reportError()“ im </span><span class="f_Strong">Finalisierungs-Skript</span><span class="f_Aufzaehlung2"> führt nur zu Fehlereinträgen im Protokoll, kann aber den Transport bzw. die Installation der Artefakte nicht mehr rückgängig machen.</span></p>
<p class="p_Aufzaehlung1" style="text-indent: 0; page-break-inside: avoid; padding-left: 1.5000rem; margin-left: 0;"><span class="f_Aufzaehlung1" style="font-family: Arial,'Lucida Sans Unicode','Lucida Grande','Lucida Sans';display:inline-block;width:1.5000rem;margin-left:-1.5000rem">&#8226;</span><span class="f_Strong">Protokolleinträge</span><span class="f_Aufzaehlung1">: Um Rückmeldungen an das TRMS zu erzeugen, müssen Sie die Methoden „trms.reportInfo()“ oder „trms.reportError()“ ausführen; diese schreiben Einträge in das Transportprotokoll.</span></p>
<p class="p_UeberschriftEinfach_Gross" style="page-break-inside: avoid; page-break-after: avoid; border-top: none; border-right: none; border-left: none;"><span class="f_UeberschriftEinfach_Gross">Bearbeitung des Skript-Codes</span></p>
<p class="p_Normal" style="page-break-inside: avoid;">Im Artefaktpaket-Assistenten <span class="f_Hyperlink"><a href="fs_95ffca161df8.html" class="topiclink">[Link]</a></span> in den Menüpunkten „Pakete“, „Changes“ und „Change Sets“ können Sie auf der Registerkarte „Transportkontrollskripte“ auf die Schaltfläche „Bearbeiten“ für ein bestimmtes der drei Skripte klicken, um den dazugehörigen Custom Code in einem Bearbeitungsdialog zu öffnen.</p>

</body>
</html>
